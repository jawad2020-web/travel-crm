import{c as Q,a as X,u as Y,g as Z,d as ee}from"./permission.cabd79a1.js";import{u as te,E as ne,D as le,P as se,M as ae}from"./userPagination.8b349a3f.js";import{d as N,r as _,o as k,I as $,w as t,s as e,y as I,A as E,B as S,C as D,T as A,_ as B,E as oe,l as ie,G as ue,i as V,N as x,J as re,z as o,k as u,j as M,K as de,L as pe,M as ce,O as q,S as _e,U as me,V as z,W as fe}from"./index.b77916f9.js";const ge=N({__name:"AddPermission",emits:["created"],setup(C,{emit:y}){const d=_({}),a=_(null),m=_({name:{required:!0,message:"Please Enter Name",trigger:"blur"},description:{required:!0,message:"Please Enter Description",trigger:"blur"}}),f=v=>{var s;v.preventDefault(),(s=a.value)==null||s.validate(r=>{if(r)console.log(r),window.$message.error("Please fill out required fields");else{const{name:i}=d.value;Q({name:i}).then(p=>{window.$message.success(p.message),y("created",p.result)})}})};return(v,s)=>{const r=E,i=S,p=D,g=A,w=B;return k(),$(w,{ref_key:"formRef",ref:a,"label-width":80,model:d.value,rules:m.value,size:"small"},{default:t(()=>[e(i,{style:{"padding-top":"24px"},label:"Name",path:"name"},{default:t(()=>[e(r,{value:d.value.name,"onUpdate:value":s[0]||(s[0]=h=>d.value.name=h),placeholder:"Enter Name"},null,8,["value"])]),_:1}),e(g,{vertical:!0,style:{"align-items":"center"}},{default:t(()=>[e(i,null,{default:t(()=>[e(p,{style:{alignment:"center"},onClick:f},{default:t(()=>[I(" Create")]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),ve=N({__name:"EditPermission",props:{id:{type:Number}},emits:["updated"],setup(C,{emit:y}){const d=C,a=_({}),m=_(null);X(d.id).then(s=>a.value=s);const f=_({name:{required:!0,message:"Please Enter Name",trigger:"blur"},description:{required:!0,message:"Please Enter Description",trigger:"blur"}}),v=s=>{var r;s.preventDefault(),(r=m.value)==null||r.validate(i=>{if(i)console.log(i),window.$message.error("Invalid");else{const{name:p}=a.value;Y(a.value.id,{name:p}).then(g=>{window.$message.success(g.message),y("updated",g)})}})};return(s,r)=>{const i=E,p=S,g=D,w=A,h=B;return k(),$(h,{ref_key:"formRef",ref:m,"label-width":80,model:a.value,rules:f.value,size:"small"},{default:t(()=>[e(p,{style:{"padding-top":"24px"},label:"Name",path:"name"},{default:t(()=>[e(i,{value:a.value.name,"onUpdate:value":r[0]||(r[0]=P=>a.value.name=P),placeholder:"Edit Name"},null,8,["value"])]),_:1}),e(w,{vertical:!0,style:{"align-items":"center"}},{default:t(()=>[e(p,null,{default:t(()=>[e(g,{style:{alignment:"center"},onClick:v},{default:t(()=>[I(" Save")]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),we=u("thead",null,[u("tr",null,[u("th",null,"ID"),u("th",null,"Permission Name"),u("th",null,"Created At"),u("th",null,"Actions")])],-1),he=u("div",null,"Create New Permission",-1),ye=u("div",null,"Update Permission",-1),xe=N({__name:"index",setup(C){const y=oe(),d=_(!1),a=_(null),m=_(!1),f=_(),v=ie(),{getList:s,list:r,page:i,pageSizes:p,itemCount:g,pageSize:w,params:h}=te(Z),P=c=>()=>V(x,null,{default:()=>V(c)}),L=_([{label:"Edit",key:"edit",icon:P(ne)},{label:"Delete",key:"delete",icon:P(le)}]);function R(){y.error({title:"Confirmation",content:()=>"Are you sure you want to delete?",positiveText:"Delete",negativeText:"Cancel",onPositiveClick:T})}function T(){const c=window.$loading||null;c.start(),ee(f.value).then(n=>{v.success(n.message),s(),c.finish()}).catch(n=>{v.error(n.message),c.finish()}),f.value=null,a.value=null}const j=c=>{a.value==="edit"?(m.value=!0,f.value=c.id):a.value==="delete"&&(f.value=c.id,R())},F=c=>{a.value=c},G=()=>{s(h.value)};return ue(()=>{s()}),(c,n)=>{const J=E,U=D,K=fe,W=_e,b=A,O=me,H=re;return k(),$(H,null,{default:t(()=>[e(b,{vertical:!0},{default:t(()=>[e(J,{type:"text",size:"small",value:o(h).name,"onUpdate:value":n[0]||(n[0]=l=>o(h).name=l),onChange:G,placeholder:"Email"},null,8,["value"]),e(W,{striped:!0},{default:t(()=>[we,u("tbody",null,[(k(!0),M(pe,null,de(o(r),l=>(k(),M("tr",{key:l.id},[u("td",null,z(l.id),1),u("td",null,z(l.name),1),u("td",null,z(l.created_at),1),u("td",null,[e(K,{onClick:ke=>j(l),onSelect:F,trigger:"click",options:L.value},{default:t(()=>[e(U,{size:"small",circle:!0},{default:t(()=>[e(o(x),null,{default:t(()=>[e(o(ae))]),_:1})]),_:1})]),_:2},1032,["onClick","options"])])]))),128))])]),_:1}),e(o(ce),{page:o(i),"onUpdate:page":n[1]||(n[1]=l=>q(i)?i.value=l:null),"page-size":o(w),"onUpdate:page-size":n[2]||(n[2]=l=>q(w)?w.value=l:null),"item-count":o(g),"page-sizes":o(p),size:"small","show-quick-jumper":!0,"show-size-picker":!0},null,8,["page","page-size","item-count","page-sizes"]),e(U,{type:"primary",size:"large",circle:!0,style:{position:"fixed",bottom:"30px",right:"40px"},onClick:n[3]||(n[3]=l=>d.value=!0)},{icon:t(()=>[e(o(x),null,{default:t(()=>[e(o(se))]),_:1})]),_:1}),e(O,{show:d.value,"onUpdate:show":n[5]||(n[5]=l=>d.value=l),preset:"dialog"},{header:t(()=>[he]),default:t(()=>[e(b,{vertical:!0},{default:t(()=>[e(ge,{onCreated:n[4]||(n[4]=l=>{o(s)(),d.value=!1})})]),_:1})]),_:1},8,["show"]),e(O,{show:m.value,"onUpdate:show":n[7]||(n[7]=l=>m.value=l),preset:"dialog"},{header:t(()=>[ye]),default:t(()=>[e(b,{vertical:!0},{default:t(()=>[e(ve,{id:f.value,onUpdated:n[6]||(n[6]=l=>{o(s)(),m.value=!1})},null,8,["id"])]),_:1})]),_:1},8,["show"])]),_:1})]),_:1})}}});export{xe as default};
