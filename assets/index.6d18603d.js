import{a as J,d as K}from"./role.3304a090.js";import{u as W,E as H,D as Q,P as X,M as Y}from"./userPagination.8b349a3f.js";import{_ as Z,a as ee}from"./EditRole.vue_vue_type_script_setup_true_lang.befa76a1.js";import{d as te,E as ne,r as p,l as le,G as oe,o as _,I as O,w as l,i as $,N as k,J as ae,s as n,z as a,k as o,j as C,K as D,L as U,M as se,O as b,A as ue,T as ie,C as de,S as re,U as pe,V as f,y as _e,ah as ce,W as me}from"./index.b77916f9.js";import"./permission.cabd79a1.js";const ge=o("thead",null,[o("tr",null,[o("th",null,"ID"),o("th",null,"Name"),o("th",null,"Permissions"),o("th",null,"Created At"),o("th",null,"Actions")])],-1),fe=o("div",null,"Create New Role",-1),ve=o("div",null,"Update Role",-1),xe=te({__name:"index",setup(he){const v=ne(),c=p(null),m=p(!1),g=p(!1),u=p(),z=le(),{getList:i,list:M,page:h,pageSizes:E,itemCount:P,pageSize:y,params:w}=W(J),x=s=>()=>$(k,null,{default:()=>$(s)}),S=p([{label:"Edit",key:"edit",icon:x(H)},{label:"Delete",key:"delete",icon:x(Q)}]);function I(){v.error({title:"Confirmation",content:()=>"Are you sure you want to delete?",positiveText:"Delete",negativeText:"Cancel",onPositiveClick:L})}function L(){const s=window.$loading||null;s.start(),K(u.value).then(e=>{z.success(e.message),i(),s.finish(),v.destroyAll}).catch(e=>{z.error(e.message),s.finish(),v.destroyAll}),u.value=null,c.value=null}const R=s=>{c.value==="edit"?(g.value=!0,u.value=s.id):c.value==="delete"&&(u.value=s.id,I())},B=s=>{c.value=s},T=()=>{i(w.value)};return oe(()=>{i()}),(s,e)=>{const V=ue,j=ce,d=ie,A=de,q=me,F=re,N=pe,G=ae;return _(),O(G,null,{default:l(()=>[n(d,{vertical:!0},{default:l(()=>[n(V,{type:"text",size:"small",value:a(w).name,"onUpdate:value":e[0]||(e[0]=t=>a(w).name=t),onChange:T,placeholder:"Search by Name"},null,8,["value"]),n(F,{striped:!0},{default:l(()=>[ge,o("tbody",null,[(_(!0),C(U,null,D(a(M),t=>(_(),C("tr",{key:t.id},[o("td",null,f(t.id),1),o("td",null,f(t.name),1),o("td",null,[n(d,null,{default:l(()=>[(_(!0),C(U,null,D(t.permissions,r=>(_(),O(j,{key:r.id,type:"success"},{default:l(()=>[_e(f(r==null?void 0:r.name),1)]),_:2},1024))),128))]),_:2},1024)]),o("td",null,f(t.created_at),1),o("td",null,[n(q,{onClick:r=>R(t),onSelect:B,trigger:"click",options:S.value},{default:l(()=>[n(A,{size:"small",circle:!0},{default:l(()=>[n(a(k),null,{default:l(()=>[n(a(Y))]),_:1})]),_:1})]),_:2},1032,["onClick","options"])])]))),128))])]),_:1}),n(d,{style:{"align-items":"center","padding-top":"15px"}},{default:l(()=>[n(a(se),{page:a(h),"onUpdate:page":e[1]||(e[1]=t=>b(h)?h.value=t:null),"page-size":a(y),"onUpdate:page-size":e[2]||(e[2]=t=>b(y)?y.value=t:null),"item-count":a(P),"page-sizes":a(E),size:"small","show-quick-jumper":!0,"show-size-picker":!0},null,8,["page","page-size","item-count","page-sizes"])]),_:1}),n(A,{type:"primary",size:"large",circle:!0,style:{position:"fixed",bottom:"30px",right:"40px"},onClick:e[3]||(e[3]=t=>m.value=!0)},{icon:l(()=>[n(a(k),null,{default:l(()=>[n(a(X))]),_:1})]),_:1}),n(N,{show:m.value,"onUpdate:show":e[5]||(e[5]=t=>m.value=t),preset:"dialog"},{header:l(()=>[fe]),default:l(()=>[n(d,{vertical:!0},{default:l(()=>[n(Z,{onCreated:e[4]||(e[4]=t=>{a(i)(),m.value=!1})})]),_:1})]),_:1},8,["show"]),n(N,{style:{width:"70%"},show:g.value,"onUpdate:show":e[7]||(e[7]=t=>g.value=t),preset:"dialog"},{header:l(()=>[ve]),default:l(()=>[n(d,{vertical:!0},{default:l(()=>[n(ee,{id:u.value,onUpdated:e[6]||(e[6]=t=>{a(i)(),g.value=!1})},null,8,["id"])]),_:1})]),_:1},8,["show"])]),_:1})]),_:1})}}});export{xe as default};
